<div class="container" style="max-width:1020px;">
    <div style="margin-bottom: 10px;"><span style="color:#ab1236">*</span> Signifies mandatory fields</div>
    <div class="Errors">
        <p *ngIf="FirstName?.errors?.['required'] && formSubmitted" style="color:red">
            Please provide us with the first name
        </p>
        <p *ngIf="Surname?.errors?.['required'] && formSubmitted" style="color:red">
            Please provide us with the surname
        </p>
        <p *ngIf="qualification?.errors?.['required'] && formSubmitted" style="color:red">
            Please provide us with installer accreditation / qualification
        </p>
        <p *ngIf="Telephone?.errors?.['required'] && formSubmitted" style="color:red">
            Please provide us with the telephone number
        </p>
        <p *ngIf="email?.errors?.['required'] && formSubmitted" style="color:red">
            Please provide us with the address postcode
        </p>
        <p *ngIf="siteName.errors?.['required'] && formSubmitted" style="color:red">
            Please provide us with the site name / plot number
        </p>
        <p *ngIf="SiteStreet.errors?.['required'] && formSubmitted" style="color:red">
            Please provide us with the address site street
        </p>
        <p *ngIf="City.errors?.['required'] && formSubmitted" style="color:red">
            Please provide us with the address city / region
        </p>
        <p *ngIf="Postcode?.errors?.['required'] && formSubmitted" style="color:red">
            Please provide us with the address postcode
        </p>
        <p *ngIf="!installerDetail.Installer_Declairation && formSubmitted" style="color:red">
            Please complete declaration as necessary for G83 or G98 installation
        </p>
        <!-- <p *ngIf="Postcode?.errors?.['pattern'] && formSubmitted" style="color:red">
            Invalid postcode
        </p> -->
    </div>
 
    <div class="installer-details-form">
        <div class="" style="display:flex;justify-content:flex-start;">
            <div class="installer-form" style="width: 50%; margin-right: 30px;">
                <h2 style="margin-bottom: 10px;">Installer Details</h2>
                <div class="installerContainer" style="margin-bottom:30px;">
                    <form #installerDetailsForm="ngForm">
                        <div class="form-group">
                            <label>Title</label>
                            <div style="margin-top:5px;margin-bottom: 20px;">
                                <input type="text" class="form-control" (keyup)="checkTitle(installerDetail.Installer_Title)"
                                    style="border: none;padding: 10px;background-color: #ebebeb;width: 100%;"
                                    [(ngModel)]="installerDetail.Installer_Title" name="title">
                                    <!-- <small *ngIf="installerDetail?.Installer_Title === null && formSubmitted" style="color:red">
                                        Please provide a title if any
                                    </small>
                                    <br> -->
                                    <small *ngIf="installerDetail?.Installer_Title != '' && !titleCheck" style="color:red">
                                        Please provide a suitable title 
                                    </small>
                            </div>
                            
                        </div>
                        <div class="form-group">
                            <label>First Name <span style="color:#ab1236">*</span></label>
                            <div style="margin-top:5px;margin-bottom: 20px;">
                                <input type="text" class="form-control" (keyup)="checkAlphabetAndDot(installerDetail.Installer_First_Name, 'first')"
                                    style="border: none;padding: 10px;background-color: #ebebeb;width: 100%;"
                                    [(ngModel)]="installerDetail.Installer_First_Name" name="FirstName" #FirstName="ngModel"
                                    [ngClass]="{'input-error': FirstName?.errors?.['required'] && formSubmitted}" required>
                                <small *ngIf="FirstName?.errors?.['required'] && formSubmitted" style="color:red">
                                    mandatory field.
                                </small>
                                <small *ngIf="installerDetail?.Installer_First_Name != '' && !alphaCheckFirst" style="color:red">
                                    Only Alphabet and Number are Allowed.
                                </small>
                            </div> 
                        </div>
                        <div class="form-group">
                            <label>Surname <span style="color:#ab1236">*</span></label>
                            <div style="margin-top:5px;margin-bottom: 20px;">
                                <input type="text" class="form-control" (keyup)="checkAlphabetAndDot(installerDetail.Installer_Surname, 'sur')"
                                    style="border: none;padding: 10px;background-color: #ebebeb;width: 100%;"
                                    [(ngModel)]="installerDetail.Installer_Surname" name="Surname" #Surname="ngModel"
                                    [ngClass]="{'input-error': Surname?.errors?.['required'] && formSubmitted}" required>
                                <small *ngIf="Surname?.errors?.['required'] && formSubmitted" style="color:red">
                                    mandatory field.
                                </small>
                                <small *ngIf="installerDetail?.Installer_Surname != '' && !alphaCheckLast" style="color:red">
                                    Only Alphabet and Number are Allowed.
                                </small>
                            </div> 
                        </div>
                        <div class="form-group">
                            <label>Accreditation / Qualification <span style="color:#ab1236">*</span></label>
                            <div style="margin-top:5px;margin-bottom: 20px;">
                                <input type="text" class="form-control" (keyup)="checkAlphabetAndDot(installerDetail.Installer_Accreditation_Qualification, 'qual')"
                                    style="border: none;padding: 10px;background-color: #ebebeb;width: 100%;"
                                    [(ngModel)]="installerDetail.Installer_Accreditation_Qualification" name="qualification"
                                    #qualification="ngModel" [ngClass]="{'input-error': qualification?.errors?.['required'] && formSubmitted}" required>
                                <small *ngIf="qualification?.errors?.['required'] && formSubmitted" style="color:red">
                                    mandatory field.
                                </small>
                                <small *ngIf="installerDetail?.Installer_Accreditation_Qualification != null && !qualCheck" style="color:red">
                                    Only Alphabet and Numbers are allowed
                                </small>
                            </div> 
                        </div>
                        <div class="form-group">
                            <label>Site name/number<span style="color:#ab1236">*</span></label>
                            <div style="margin-top:5px;margin-bottom: 20px;">
                                <input type="text" class="form-control" (keyup)="checkAddress(installerDetail.Installer_Site_Number, 'site')"
                                    style="border: none;padding: 10px;background-color: #ebebeb;width: 100%;"
                                    #siteName="ngModel" [(ngModel)]="installerDetail.Installer_Site_Number" name="siteName"
                                    [ngClass]="{'input-error': siteName?.errors?.['required'] && formSubmitted}" required>
                                <small *ngIf="siteName.errors?.['required'] && formSubmitted" style="color:red">
                                    mandatory field.
                                </small>
                                <small *ngIf="installerDetail?.Installer_Site_Number != '' && !siteCheck " style="color:red">
                                    Only Alphabet, Numbers, / , ., - are allowed
                                </small> 
                            </div> 
                        </div>
                        <div class="form-group">
                            <label>Street<span style="color:#ab1236">*</span></label>
                            <div style="margin-bottom: 20px;">
                                <input type="text" class="form-control"  (keyup)="checkAddress(installerDetail.Installer_Street, 'street')"
                                 #SiteStreet="ngModel" [(ngModel)]="installerDetail.Installer_Street"
                                style="border: none;padding: 10px;background-color: #ebebeb;width: 100%;"
                                name="SiteStreet" [ngClass]="{'input-error': SiteStreet?.errors?.['required'] && formSubmitted}" required>
                                <small *ngIf="SiteStreet.errors?.['required'] && formSubmitted" style="color:red">
                                    mandatory field.
                                </small> 
                                <small *ngIf="installerDetail?.Installer_Street != '' && !streetCheck " style="color:red">
                                    Only Alphabet, Numbers, / , ., - are allowed
                                </small>
                            </div> 
                        </div>
                        <div class="form-group">
                            <label>City/Region<span style="color:#ab1236">*</span></label>
                            <div style="margin-bottom: 20px;">
                                <input type="text" class="form-control" (keyup)="checkAlphabet(installerDetail.Installer_City_Region, 'city')"
                                 #City="ngModel" [(ngModel)]="installerDetail.Installer_City_Region" name="City"
                                    style="border: none;padding: 10px;background-color: #ebebeb;width: 100%;"
                                    [ngClass]="{'input-error': City?.errors?.['required'] && formSubmitted}" required>
                                <small *ngIf="City.errors?.['required'] && formSubmitted" style="color:red">
                                    mandatory field.
                                </small>  
                                <small *ngIf="installerDetail?.Installer_City_Region != '' && !cityCheck" style="color:red">
                                    Only Alphabet Allowed.
                                </small>
                            </div> 
                        </div>
                        <div class="form-group">
                            <label>Postcode<span style="color:#ab1236">*</span></label>
                            <div style="margin-bottom: 20px;">
                                <input (keyup)="checkPostcode(installerDetail.Installer_Postcode)" type="text" class="form-control" #Postcode="ngModel" [(ngModel)]="installerDetail.Installer_Postcode"
                                    style="border: none;padding: 10px;background-color: #ebebeb;width: 100%;" [maxlength]="8"
                                    name="Postcode" 
                                    [ngClass]="{'input-error': Postcode?.errors?.['required'] && formSubmitted}" required>
                                <small *ngIf="Postcode?.errors?.['required'] && formSubmitted" style="color:red">
                                    mandatory field.
                                </small>
                                <small *ngIf="installerDetail?.Installer_Postcode != '' && !postCheck" style="color: red;">
                                    Invalid Postcode
                                </small>
                            </div>  
                        </div>
                        <div class="form-group">
                            <label>Email address<span style="color:#ab1236">*</span></label>
                            <div style="margin-top:5px;margin-bottom: 20px;">
                                <input type="email" class="form-control" 
                                    style="border: none;padding: 10px;background-color: #ebebeb;width: 100%;"
                                    [(ngModel)]="installerDetail.Installer_Email_Address" name="email" #email="ngModel" 
                                    [ngClass]="{'input-error': email?.errors?.['required'] && formSubmitted}" [pattern]="emailPattern" required>
                                <small *ngIf="email?.errors?.['required'] && formSubmitted" style="color:red">
                                    mandatory field.
                                </small>
                                <p *ngIf="email?.errors?.['pattern']" style="color:red">
                                    Invalid email address
                                </p>
                            </div> 
                        </div>
                        <div class="form-group">
                            <label>Telephone <span style="color:#ab1236">*</span></label>
                            <div style="margin-top:5px;margin-bottom: 20px;">
                                <input type="text" class="form-control" 
                                    style="border: none;padding: 10px;background-color: #ebebeb;width: 100%;"
                                    [(ngModel)]="installerDetail.Installer_Telephone" name="Telephone" #Telephone="ngModel"
                                    [minlength]="10" [maxlength]="11" [pattern]="mobilePattern" 
                                    [ngClass]="{'input-error': Telephone?.errors?.['required'] && formSubmitted}" required>
                                <small *ngIf="Telephone?.errors?.['required'] && formSubmitted" style="color:red">
                                    mandatory field.
                                </small>
                                <p *ngIf="Telephone?.errors?.['minlength']" style="color:red">
                                    Telephone Numbers should be between 10-11 digits
                                </p>
                                <p *ngIf="Telephone?.errors?.['maxlength']" style="color:red">
                                    Telephone Numbers should be between 10-11 digits
                                </p>
                                <p *ngIf="Telephone?.errors?.['pattern']" style="color:red">
                                    Invalid telephone number
                                </p>
                            </div> 
                        </div>
                    </form>
                </div>
            </div>

            <div class="contact-detail-info" style="width:50%">
                <h2 style="margin-bottom: 20px;">Would you like to use your contact details as the installer details?</h2>
                <button  mat-button class="btn btn-danger" (click)="contactDetailsClick()">
                    USE MY CONTACT DETAILS
                </button>
                <div style="margin-top: 20px;">
                    <h2>Your contact details</h2>
                    <div> {{contactDetail?.title}} {{contactDetail?.custFirstName}} {{contactDetail?.custSurName}}</div>
                    <div> {{contactDetail?.Site_Name}} </div>
                    <!-- <div>{{contactDetail?.Site_Number}}</div> -->
                    <div>{{contactDetail?.Site_Street}}</div> 
                    <div>{{contactDetail?.Site_City}}</div> 
                    <div>{{contactDetail?.Site_Postcode}}</div> 
                    <div>{{contactDetail?.email}}</div> 
                    <div>{{contactDetail?.custContactTel}}</div>
                </div>
            </div>
        </div>
        <div style="display:flex;" [ngClass]="{'input-error': !installerDetail.Installer_Declairation && formSubmitted}">
            <input type="checkbox" value="installerDetail.Installer_Declairation" [(ngModel)]="installerDetail.Installer_Declairation" class="mt-3 regular-checkbox"
             (click)="check($event)"
             [ngClass]="{'check-error': !installerDetail.Installer_Declairation && formSubmitted}">
            <p>	
                I declare that the relevant Micro-generators and the installation, which together 
                forming a Microgenerating Plant within the scope of EREC G98 at the above address, conform to 
                the requirements of EREC G98. This declaration of compliance is confined to 
                Micro-generating Plant tested to EREC G98 or EREC G83 as applicable at the time of commissioning
            </p>
        </div>
    </div> 
    <div class="action-btns">
        <button mat-button class="btn btn-danger text-uppercase btn-sm me-2" (click)="onSave('isSubmit', 'InProgress')"
        [disabled]="!titleCheck || !alphaCheckFirst || !alphaCheckLast || !qualCheck || !siteCheck || !streetCheck || !cityCheck || email?.errors?.['pattern'] || Telephone?.errors?.['pattern'] || Telephone?.errors?.['minlength'] || !postCheck">
         SAVE AND CONTINUE
        </button>
        <button mat-button class="btn btn-danger text-uppercase btn-sm me-2" *ngIf="navIndex!==0" (click)="backToPreviousTemplate()">Back</button>
        <button mat-button class="btn btn-danger text-uppercase btn-sm me-2" (click)="onSave('saveForLater', 'Paused');"
        [disabled]="!titleCheck || !alphaCheckFirst || !alphaCheckLast || !qualCheck || !siteCheck || !streetCheck || !cityCheck || email?.errors?.['pattern'] || Telephone?.errors?.['pattern'] || Telephone?.errors?.['minlength'] || !postCheck">
         SAVE FOR LATER
        </button>
        <button mat-button class="btn btn-danger text-uppercase btn-sm me-2" (click)="goToCallBackTemplate()" >
         REQUEST A CALLBACK 
        </button>
    </div>
</div>
